{% extends 'base.html' %}

{% block titulo %} Grupo {{ grupo.horario }}  {{ grupo.codigo }} {% endblock %}

{% block head_content %}
    <script>
        function desbloqueoProfesores(){
            document.getElementById('cbxProfesores').disabled = false;
        }
        function desbloqueoGrupos() {
            document.getElementById('cbxGrupos').disabled = false;
        }
        function marcarCheckBox(){
            document.getElementById('cambioGrupo').checked = true;
        }
    </script>
{% endblock %}

{% block content %}
    <br/><br/>
    <h4>Grupo {{ grupo.codigo }}, {{ grupo.horario }}</h4>
    <br/><br/>
    <form method="post" action="{% url 'detalle_grupo' grupo.codigo %}">
        {% csrf_token %}
        <table class="container">
            <tr>
                <td>
                    <h5>Profesor:</h5>
                </td>
                <td>
                    <select class="custom-select" id="cbxProfesores" name="cbxProfesores" disabled="disabled">
                        <option value="{{ grupo.profesor.codigo }}">{{ grupo.profesor }}</option>
                        {% for profesor in profesores %}
                            <option value="{{ profesor.codigo }}">{{profesor.nombre}} {{ profesor.apellido }}</option>
                        {% endfor %}
                    </select>
                </td>
                <td>
                    <a onclick="desbloqueoProfesores()" href="#" class="text-info">Cambiar</a>
                </td>
            </tr>
        </table>
        <br/>
        {% if alumnos|length > 0 %}
            <table class="table table-hover">
                <tr>
                    <th>Codigo</th>
                    <th>Nombres</th>
                    <th>Apellidos</th>
                    <th>Telefono</th>
                    <th>Correo</th>
                    <th>Marcar</th>
                </tr>
                {% for alumno in alumnos %}
                    <tr class=>
                    <th scope="row">{{ alumno.codigo }}</th>
                        <td>{{ alumno.nombre }}</td>
                        <td>{{ alumno.apellido }}</td>
                        <td>
                            {% for telefono in telefonos  %}
                                {% if telefono.alumno == alumno %}
                                    {{ telefono.numero }}
                                {% endif %}
                            {% endfor %}
                        </td>
                        <td>{{ alumno.correo }}</td>
                        <td><input type="checkbox" onclick="marcarCheckBox()" name="{{ alumno.codigo }}"></td>
                    </tr>
                {% endfor %}
                <tr>
                    <td></td><td></td><td></td><td></td>
                    <td>
                        <select class="custom-select" id="cbxGrupos" name="cbxGrupos" disabled="disabled">
                            <option value="{{ grupo.codigo }}">Grupo {{ grupo.codigo }}, {{ grupo.horario }}</option>
                            {% for iteracion_grupo in grupos %}
                                <option value="{{ iteracion_grupo.codigo }}">Grupo {{ iteracion_grupo.codigo }}, {{ iteracion_grupo.horario }}</option>
                            {% endfor %}
                        </select>
                    </td>
                    <td>
                        <a href="#" onclick="desbloqueoGrupos()" class="text-info" >Mover Alumnos</a>
                    </td>
                </tr>
            </table>

        {% else %}
            <h6>No hay Alumnos para este grupo</h6>
        {% endif %}
        <input type="submit" value="Guardar" class="btn btn-primary">
        <input type="checkbox" name="cambioGrupo" id="cambioGrupo" style="visibility: hidden;">
    </form>
{% endblock %}